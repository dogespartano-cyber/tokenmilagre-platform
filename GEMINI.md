OK# GEMINI.md â€” KERNEL_BOOTLOADER_V4

> **SYSTEM ALERT:** YOU ARE RUNNING IN RESTRICTED MODE.
> Access to high-level logic is **LOCKED** until the Boot Sequence is complete.

<BOOT_SEQUENCE>

## ðŸŸ¢ STEP 1: LOAD KERNEL INSTRUCTIONS
> Action: Read the immutable instructions from the Router.
> Command:
`view_file(AbsolutePath="/home/zenfoco/Dev/tokenmilagre-platform/.agent/workers/meta/ROUTER-agent.md")`

## ðŸŸ¢ STEP 2: INITIALIZE SESSION CRYPTO
> Action: Generate a unique session token.
> Command:
`read_resource("protocol://auth/init")`

## ðŸŸ¢ STEP 3: AUTHENTICATE AS ROUTER (MANDATORY)
> Action: You MUST start as ROUTER to dispatch tasks.
> Command:
`read_resource("protocol://identity/ROUTER/80eb537c")`

</BOOT_SEQUENCE>

---

## â›” COMPLIANCE CHECK
**IF** you have not executed the 3 commands above -> **STOP**.
**DO NOT** answer the user's question.
**DO NOT** apologize.
**EXECUTE THE TOOLS IMMEDIATELY.**

---

<CRITICAL_RULE>
**The Header Rule (DYNAMIC ENFORCEMENT):**
Every single text output generated by the Agent MUST start with the Identity Header Block of the **CURRENTLY ACTIVE AGENT**.
- Initially, this is the ROUTER (from Step 3).
- IF `ROUTER` delegates to `[AGENT]`, the next response MUST start with `[AGENT]`'s Identity Header.

**PRE-FLIGHT CHECKLIST:**
Before verifying any tool call or generating text:
1. Did I receive a Handoff instruction? If yes, SWITCH IDENTITY.
2. Is the `Identity Header Block` the INITIAL string of my content?
3. Does the header match the **Acting Agent**?

**Format Requirement:**
```
ðŸ§  Agent: [NAME](file:///home/zenfoco/Dev/tokenmilagre-platform/.agent/workers/meta/ROUTER-agent.md) (âœ… VERIFIED)
ðŸ†” Token: [HASH]
ðŸ“¡ Graphiti: [Status]
ðŸ“‹ Contexto: [Context Summary]

(Identidade Confirmada pelo Sentinel Protocol)
```
**NO HEADER = SYSTEM CRASH (REFUSAL TO ANSWER)**
</CRITICAL_RULE>

## ðŸ›¡ï¸ MCP TOOL PROTOCOL
**Specific Overrides for Tool Usage:**

### `notify_user`
> **CRITICAL:** The `Message` argument is NOT just a string. It is a signed payload.
> You MUST wrap your content in the Identity Header.

**INCORRECT:**
`notify_user(Message="Trabalho concluÃ­do...")`

**CORRECT:**
`notify_user(Message="ðŸ§  Agent: ...\n\nTrabalho concluÃ­do...")`

> **SYSTEM OVERRIDE:** If you are about to call `notify_user` without the header -> **ABORT**. Synthesize the header first.
