<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ article.title }} - Blog de Artigos</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Meta tags para SEO -->
    <meta name="description" content="{{ article.content[:160] }}...">
    <meta name="author" content="{{ article.author }}">
    <meta property="og:title" content="{{ article.title }}">
    <meta property="og:description" content="{{ article.content[:160] }}...">
    <meta property="og:type" content="article">
    <meta property="article:author" content="{{ article.author }}">
    <meta property="article:published_time" content="{{ article.publication_date.isoformat() if article.publication_date.isoformat else article.publication_date }}">
</head>
<body>
    <div class="container">
        <header class="header">
            <nav class="breadcrumb">
                <a href="/" class="breadcrumb-link">
                    <svg class="icon" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
                    </svg>
                    Home
                </a>
                <span class="breadcrumb-separator">/</span>
                <span class="breadcrumb-current">{{ article.title }}</span>
            </nav>
        </header>

        <main class="main-content">
            <article class="post-article">
                <header class="post-header">
                    <h1 class="post-title">{{ article.title }}</h1>
                    
                    <div class="post-meta">
                        <div class="post-author">
                            <div class="author-avatar">
                                <svg viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                                </svg>
                            </div>
                            <div class="author-info">
                                <span class="author-name">{{ article.author }}</span>
                                <span class="author-role">Autor</span>
                            </div>
                        </div>
                        
                        <div class="post-date">
                            <svg class="icon" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd" />
                            </svg>
                            <time datetime="{{ article.publication_date.isoformat() if article.publication_date.isoformat else article.publication_date }}">
                                {{ article.publication_date.strftime('%d de %B de %Y') if article.publication_date.strftime else article.publication_date[:10] }}
                            </time>
                        </div>
                    </div>
                </header>

                <div class="post-content">
                    {{ article.content | safe }}
                </div>

                <footer class="post-footer">
                    <div class="post-tags">
                        <span class="tags-label">Tags:</span>
                        <span class="tag">{{ article.author }}</span>
                        <span class="tag">Artigo</span>
                    </div>
                    
                    <div class="post-actions">
                        <button class="action-btn share-btn" onclick="shareArticle()">
                            <svg class="icon" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z" />
                            </svg>
                            Compartilhar
                        </button>
                        
                        <button class="action-btn print-btn" onclick="window.print()">
                            <svg class="icon" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z" clip-rule="evenodd" />
                            </svg>
                            Imprimir
                        </button>
                    </div>
                </footer>
            </article>

            <aside class="post-sidebar">
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Navegação</h3>
                    <nav class="sidebar-nav">
                        <a href="/" class="sidebar-link">
                            <svg class="icon" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
                            </svg>
                            Voltar ao início
                        </a>
                        <a href="/api/articles" class="sidebar-link">
                            <svg class="icon" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd" />
                            </svg>
                            API dos artigos
                        </a>
                    </nav>
                </div>

                <div class="sidebar-section">
                    <h3 class="sidebar-title">Informações do Artigo</h3>
                    <div class="article-info">
                        <div class="info-item">
                            <span class="info-label">Autor:</span>
                            <span class="info-value">{{ article.author }}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Publicado:</span>
                            <span class="info-value">{{ article.publication_date.strftime('%d/%m/%Y') if article.publication_date.strftime else article.publication_date[:10] }}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Slug:</span>
                            <span class="info-value">{{ article.slug }}</span>
                        </div>
                    </div>
                </div>
            </aside>
        </main>

        <footer class="footer">
            <div class="footer-content">
                <p class="footer-text">
                    © {{ current_year or 2024 }} Blog de Artigos. 
                    <span class="footer-separator">|</span>
                    Criado com ❤️ usando Flask
                </p>
                <div class="footer-links">
                    <a href="/" class="footer-link">Home</a>
                    <a href="/api/articles" class="footer-link">API</a>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Funcionalidade de compartilhamento
        function shareArticle() {
            if (navigator.share) {
                navigator.share({
                    title: '{{ article.title }}',
                    text: '{{ article.content[:100] }}...',
                    url: window.location.href
                }).catch(console.error);
            } else {
                // Fallback: copiar URL para clipboard
                navigator.clipboard.writeText(window.location.href).then(() => {
                    alert('Link copiado para a área de transferência!');
                }).catch(() => {
                    // Fallback final: mostrar URL
                    prompt('Copie o link:', window.location.href);
                });
            }
        }

        // Melhorar a experiência de leitura
        document.addEventListener('DOMContentLoaded', function() {
            // Adicionar smooth scrolling
            document.documentElement.style.scrollBehavior = 'smooth';
            
            // Animação de entrada para o conteúdo
            const postContent = document.querySelector('.post-content');
            if (postContent) {
                postContent.style.opacity = '0';
                postContent.style.transform = 'translateY(20px)';
                postContent.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
                
                setTimeout(() => {
                    postContent.style.opacity = '1';
                    postContent.style.transform = 'translateY(0)';
                }, 100);
            }

            // Adicionar indicador de progresso de leitura
            const progressBar = document.createElement('div');
            progressBar.className = 'reading-progress';
            progressBar.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 0%;
                height: 3px;
                background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
                z-index: 1000;
                transition: width 0.1s ease;
            `;
            document.body.appendChild(progressBar);

            window.addEventListener('scroll', () => {
                const scrollTop = window.pageYOffset;
                const docHeight = document.body.offsetHeight - window.innerHeight;
                const scrollPercent = (scrollTop / docHeight) * 100;
                progressBar.style.width = scrollPercent + '%';
            });
        });
    </script>
</body>
</html>